<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø¨ÙˆØ§Ø¨Ø© ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„ | Ø§Ù„Ù†Ø¬Ø§Ø± Ù„Ù„Ù…Ù‚Ø§ÙˆÙ„Ø§Øª</title>
  <meta name="description" content="Ø¥Ù†Ø´Ø§Ø¡ ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„ ÙˆØ·Ø¨Ø§Ø¹ØªÙ‡Ø§ PDF Ø¨Ø³Ø±Ø¹Ø©.">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/favicon.png">
  <meta name="theme-color" content="#0f172a">

  <!-- OG -->
  <meta property="og:type" content="website">
  <meta property="og:locale" content="ar_AR">
  <meta property="og:title" content="Ø¨ÙˆØ§Ø¨Ø© ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„ | Ø§Ù„Ù†Ø¬Ø§Ø± Ù„Ù„Ù…Ù‚Ø§ÙˆÙ„Ø§Øª">
  <meta property="og:description" content="Ø¥Ù†Ø´Ø§Ø¡ ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„ ÙˆØ·Ø¨Ø§Ø¹ØªÙ‡Ø§ PDF Ø¨Ø³Ø±Ø¹Ø©.">
  <meta property="og:image" content="/og-image.png">

  <style>
    :root{
      --card-bg: rgba(255,255,255,0.07);
      --card-bg-hover: rgba(255,255,255,0.10);
      --text: #ffffff;
      --muted: #d1d5db;
      --focus: #ffd166;
      --ring: rgba(96,165,250,.35);
    }
    *{box-sizing:border-box}
    body{
      font-family:'Segoe UI',system-ui,Tahoma;
      color:var(--text);
      margin:0; padding:0 16px 70px;
      background:#0f172a url('https://i.postimg.cc/RVdVFtz0/hero.png') no-repeat center/cover fixed;
    }
    .overlay{position:fixed;inset:0;backdrop-filter:brightness(.5);z-index:0}
    .container{position:relative;z-index:1;max-width:1100px;margin:auto;padding:36px 0}
    h1{margin:0 0 6px;font-size:2.2rem;text-align:center}
    .subtitle{color:#cbd5e1;text-align:center;margin:0 0 18px}

    .toolbar{
      display:flex; gap:10px; align-items:center; justify-content:space-between; max-width:980px; margin:0 auto 14px;
    }
    .search{flex:1; display:flex; justify-content:flex-end}
    #searchInput{
      width:100%; max-width:420px; padding:12px 14px; border-radius:10px; border:none;
      background:rgba(255,255,255,.1); color:var(--text); text-align:right;
    }
    .hint{max-width:980px; margin:14px auto; background:rgba(255,255,255,.07); border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:14px}
    .section-title{max-width:980px;margin:22px auto 10px; font-size:1.1rem; border-bottom:1px solid #475569; padding-bottom:8px}
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:18px; max-width:980px; margin:0 auto}
    .card{
      display:block; text-decoration:none; color:var(--text); text-align:right;
      background:var(--card-bg); border-radius:12px; padding:16px 18px; backdrop-filter:blur(6px);
      transition:.25s; border:1px solid rgba(255,255,255,.12);
    }
    .card:hover{ transform:translateY(-2px); background:var(--card-bg-hover); box-shadow:0 0 15px rgba(96,165,250,.45) }
    .top{display:flex; gap:10px; align-items:center; margin-bottom:6px}
    .title{font-weight:700}
    .badge{margin-inline-start:auto; font-size:.8rem; padding:4px 8px; border-radius:999px; background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.18)}
    .desc{color:var(--muted); font-size:.92rem}
    footer{margin-top:36px; text-align:center; color:#a3a3a3}

    .skeleton{border-radius:12px;height:72px;background:rgba(255,255,255,0.08);position:relative;overflow:hidden}
    .skeleton::after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg,transparent,rgba(255,255,255,.18),transparent);animation:shimmer 1.2s infinite}
    @keyframes shimmer{100%{transform:translateX(100%)}}
    [hidden]{display:none !important}

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
      background:rgba(0,0,0,.45); backdrop-filter: blur(2px);
      z-index:3; padding:20px;
    }
    .modal{
      width:100%; max-width:820px; background:rgba(15,23,42,.9);
      border:1px solid rgba(255,255,255,.12); border-radius:16px; padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.45);
    }
    .modal h2{margin:6px 0 6px; text-align:center}
    .modal p{margin:0 0 10px; text-align:center; color:#d1d5db}
    .modal .choices{display:grid; grid-template-columns:1fr; gap:12px}
    .choice{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      padding:14px 16px; border-radius:12px; background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12); cursor:pointer; text-align:right;
    }
    .choice:hover{box-shadow:0 0 0 3px var(--ring) inset; background:rgba(255,255,255,.09)}
    .pill{font-size:.8rem; padding:4px 8px; border-radius:999px; background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.18)}
    .choice .sub{color:#cbd5e1; font-size:.95rem}
    .modal .foot{display:flex; justify-content:space-between; align-items:center; margin-top:8px}
    .modal .deep-link{font-size:.85rem; color:#cbd5e1}
    .closeBtn{
      background:transparent;color:#fff;border:1px solid rgba(255,255,255,.25);border-radius:10px;padding:8px 12px;cursor:pointer
    }
    .changeBtn{
      display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.18);
      background:var(--card-bg); color:var(--text); text-decoration:none;
    }
    .changeBtn:hover{ background:var(--card-bg-hover); }

    @media(min-width:720px){
      .modal .choices{grid-template-columns:1fr 1fr}
    }
    @media(max-width:600px){
      h1{font-size:1.85rem}
      .subtitle{font-size:.95rem}
      .toolbar{flex-direction:column; align-items:stretch}
    }
    @media (prefers-reduced-motion: reduce){ .card:hover{transform:none; box-shadow:none} .skeleton::after{animation:none} }
  </style>
</head>
<body>
  <div class="overlay"></div>
  <div class="container">
    <h1>Ø¨ÙˆØ§Ø¨Ø© ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„</h1>
    <p class="subtitle">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù† Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©ØŒ Ø«Ù… Ø£Ù†Ø´Ø¦ ØªØµØ±ÙŠØ­Ùƒ ÙˆØ§Ø¶ØºØ· <b>Generate PDF</b> Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø£Ùˆ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.</p>

    <!-- Ø´Ø±ÙŠØ· Ø£Ø¯ÙˆØ§Øª -->
    <div class="toolbar">
      <a class="changeBtn" id="changeProjectBtn">ğŸ” Ø¨Ø¯Ù‘Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</a>
      <div class="search">
        <input id="searchInput" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„ØªØµØ±ÙŠØ­ Ø£Ùˆ Ø§Ù„ÙƒÙˆØ¯ (WAH / GWP ...)" oninput="filterPermits()" aria-label="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ØªØµØ§Ø±ÙŠØ­">
      </div>
    </div>

    <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù… -->
    <div id="projTitle" class="section-title"></div>

    <!-- Ø§Ù„Ø´Ø¨ÙƒØ© -->
    <div class="grid" id="skeleton"></div>
    <div class="grid" id="grid" aria-live="polite"></div>

    <!-- Ù…ÙˆØ§Ø±Ø¯ Ø¥Ø¶Ø§ÙÙŠØ© -->
    <div class="section-title">ğŸ“‚ Ù…ÙˆØ§Ø±Ø¯ Ø¥Ø¶Ø§ÙÙŠØ©</div>
    <div class="grid">
      <a class="card" href="https://najran-ptw.glide.page/dl/8aba19" target="_blank" rel="noopener">
        <div class="top"><span>ğŸ“</span><span class="title">Ø³Ø¬Ù„ ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„</span><span class="badge">LOG</span></div>
        <div class="desc">Ø¹Ø±Ø¶ ÙˆØªØªØ¨Ø¹ Ø§Ù„ØªØµØ§Ø±ÙŠØ­ Ø§Ù„ØµØ§Ø¯Ø±Ø©.</div>
      </a>
      <a class="card" href="https://sites.google.com/view/najran-ra/home" target="_blank" rel="noopener">
        <div class="top"><span>ğŸ› ï¸</span><span class="title">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø±</span><span class="badge">RA</span></div>
        <div class="desc">Ù†Ù…Ø§Ø°Ø¬ ÙˆØ¥Ø±Ø´Ø§Ø¯Ø§Øª ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø±.</div>
      </a>
    </div>

    <footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Eng.Ahmed El-Basha</footer>
  </div>

  <!-- Modal Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ -->
  <div class="modal-backdrop" id="projectModal" hidden>
    <div class="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
      <h2 id="modalTitle">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h2>
      <p>ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ø¹Ø±Ø¶ ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡.</p>
      <div class="choices">
        <div class="choice" data-project="najran" tabindex="0" role="button" aria-label="Ù…Ø¨Ù†Ù‰ Ø¥Ø¯Ø§Ø±ÙŠ ÙˆÙ…Ø¨Ù†Ù‰ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù…Ø­Ø·Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ù†Ø¬Ø±Ø§Ù†">
          <div>
            <div class="title">Ù…Ø¨Ù†Ù‰ Ø¥Ø¯Ø§Ø±ÙŠ ÙˆÙ…Ø¨Ù†Ù‰ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù…Ø­Ø·Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ù†Ø¬Ø±Ø§Ù†</div>
            <div class="sub">ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (6 Ø±ÙˆØ§Ø¨Ø·)</div>
          </div>
          <span class="pill">NAJRAN</span>
        </div>

        <div class="choice" data-project="sharurah" tabindex="0" role="button" aria-label="Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙˆØ§Ø¨Ø§Øª Ø£Ù…Ù†ÙŠØ© Ø¨Ù…Ø­Ø·Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø´Ø±ÙˆØ±Ø©">
          <div>
            <div class="title">Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙˆØ§Ø¨Ø§Øª Ø£Ù…Ù†ÙŠØ© Ø¨Ù…Ø­Ø·Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø´Ø±ÙˆØ±Ø©</div>
            <div class="sub">ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (6 Ø±ÙˆØ§Ø¨Ø·)</div>
          </div>
          <span class="pill">SHARURAH</span>
        </div>
      </div>

      <div class="foot">
        <span class="deep-link">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¹Ø¨Ø±: <code>?project=najran</code> Ø£Ùˆ <code>?project=sharurah</code></span>
        <button class="closeBtn" id="closeModalBtn" aria-label="Ø¥ØºÙ„Ø§Ù‚">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <script>
    // ===== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =====
    const PROJECTS = {
      najran: {
        id:'najran',
        name:'Ù…Ø¨Ù†Ù‰ Ø¥Ø¯Ø§Ø±ÙŠ ÙˆÙ…Ø¨Ù†Ù‰ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù…Ø­Ø·Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ù†Ø¬Ø±Ø§Ù†',
        links:[
          { title:"ØªØµØ±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ù…Ø±ØªÙØ¹Ø©", code:"WAH", icon:"ğŸ§—", desc:"Ø£Ø¹Ù…Ø§Ù„ ÙÙˆÙ‚ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø±Ø¶ ØªØªØ·Ù„Ø¨ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø³Ù‚ÙˆØ·.", url:"https://script.google.com/macros/s/AKfycbwVaSmrvgSG_KyhHaBGnrVcQVW_trdva1Vkk3d2sxlqjW8RC16iVNikjphQ-TSNyj7X/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø­ÙØ±",               code:"EXC", icon:"â›ï¸", desc:"Ø£Ø¹Ù…Ø§Ù„ Ø­ÙØ±/Ø®Ù†Ø§Ø¯Ù‚ ÙˆÙ…Ø¬Ø§ÙˆØ±Ø© Ø®Ø¯Ù…Ø§Øª Ù…Ø¯ÙÙˆÙ†Ø©.",                 url:"https://script.google.com/macros/s/AKfycbzeNCkVOGRq4I2DAnsP_rwtyJsH95-qrdpDH7SGtU9pKHCssDmGFeMi_LCVAym_pamz/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø³Ø§Ø®Ù†Ø©",           code:"HOT", icon:"ğŸ”¥", desc:"Ù„Ø­Ø§Ù…/Ù‚Ø·Ø¹/Ø¬Ø±Ø§ÙŠÙ†Ø¯Ø± Ø£Ùˆ Ø£ÙŠ Ù…ØµØ¯Ø± Ø´Ø±Ø±/Ù„Ù‡Ø¨.",                   url:"https://script.google.com/macros/s/AKfycbyj16dWBfMwWn5htsSTpgnjJR_VGshTiyn3pYA-_GRKSUUaNmngJIqBl8L2df8nwmKpQw/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ù…Ø­ØµÙˆØ±Ø©",          code:"CSE", icon:"ğŸ•³ï¸", desc:"Ø¯Ø®ÙˆÙ„ Ù…Ù†Ø§Ø·Ù‚ Ù…ØºÙ„Ù‚Ø© Ø§Ù„ØªÙ‡ÙˆÙŠØ© Ø£Ùˆ Ø°Ø§Øª ÙØªØ­Ø§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©.",        url:"https://script.google.com/macros/s/AKfycbxFfOIG6s8tDdAArAzmAoYUuqnW0zQGv7RsnQMrdlcwuae30_5FYDSNyvXs2V7JLyX0/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø¹Ø§Ù…Ø©",            code:"GWP", icon:"ğŸ§°", desc:"Ø£Ø¹Ù…Ø§Ù„ Ø¹Ø§Ù…Ø© Ù„Ø§ ØªÙ†Ø¯Ø±Ø¬ ØªØ­Øª ØªØµØ§Ø±ÙŠØ­ Ù…ØªØ®ØµØµØ©.",                 url:"https://script.google.com/macros/s/AKfycbyWrievOKw_XXJRS2E30P8VsG5f3WjilJoORpfplM0EFuw77zgre8sQwYjnyBHAXKoy/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø±ÙØ¹",               code:"LOP", icon:"ğŸ—ï¸", desc:"Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£ÙˆÙ†Ø§Ø´ ÙˆØ§Ù„Ø±ÙØ¹ Ø¨Ø§Ù„Ø±Ø§ÙØ¹Ø§Øª ÙˆØ§Ù„ÙˆÙ†Ø´Ø§Øª.",              url:"https://script.google.com/macros/s/AKfycbyqJipVrchzNaCGgyi-vRgmbKZA52uhOguv9eRM46FzJbrj2hxl0rAtqwogA8lqmgorQQ/exec" }
        ]
      },
      sharurah: {
        id:'sharurah',
        name:'Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙˆØ§Ø¨Ø§Øª Ø£Ù…Ù†ÙŠØ© Ø¨Ù…Ø­Ø·Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø´Ø±ÙˆØ±Ø©',
        links:[
          { title:"ØªØµØ±ÙŠØ­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø¹Ø§Ù…Ø©",            code:"GWP", icon:"ğŸ§°", desc:"Ø£Ø¹Ù…Ø§Ù„ Ø¹Ø§Ù…Ø© Ù„Ø§ ØªÙ†Ø¯Ø±Ø¬ ØªØ­Øª ØªØµØ§Ø±ÙŠØ­ Ù…ØªØ®ØµØµØ©.",                 url:"https://script.google.com/macros/s/AKfycbyjijxMu2kAyHEUGzLYnoskA2K0Q9Tlh2TZRegn6naNVhA8V7DfG-Z0Q2v4V_9bjnNcCQ/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ù…Ø­ØµÙˆØ±Ø©",          code:"CSE", icon:"ğŸ•³ï¸", desc:"Ø¯Ø®ÙˆÙ„ Ù…Ù†Ø§Ø·Ù‚ Ù…ØºÙ„Ù‚Ø© Ø§Ù„ØªÙ‡ÙˆÙŠØ© Ø£Ùˆ Ø°Ø§Øª ÙØªØ­Ø§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©.",        url:"https://script.google.com/macros/s/AKfycbyMwmk_BiB6jxdV0IVK-s8Tvy90AmuWDXYa28J2fTW_3v1sjnt4DhfBWPO6n1LueQkKeg/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø­ÙØ±",               code:"EXC", icon:"â›ï¸", desc:"Ø£Ø¹Ù…Ø§Ù„ Ø­ÙØ±/Ø®Ù†Ø§Ø¯Ù‚ ÙˆÙ…Ø¬Ø§ÙˆØ±Ø© Ø®Ø¯Ù…Ø§Øª Ù…Ø¯ÙÙˆÙ†Ø©.",                 url:"https://script.google.com/macros/s/AKfycbzE39JEq2zdreAxLUiWw7GOzDtJ5Bs1ytUkRaX4DLOqt4vKg0hqqsNxG4n26sgzYDOZ/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø³Ø§Ø®Ù†Ø©",           code:"HOT", icon:"ğŸ”¥", desc:"Ù„Ø­Ø§Ù…/Ù‚Ø·Ø¹/Ø¬Ø±Ø§ÙŠÙ†Ø¯Ø± Ø£Ùˆ Ø£ÙŠ Ù…ØµØ¯Ø± Ø´Ø±Ø±/Ù„Ù‡Ø¨.",                   url:"https://script.google.com/macros/s/AKfycbz2aQZRYG5_tTTk83P0-TrfX-jDXLFxhtm1ft28MgXUoYmIZzb0XcW2v2k8RdyPS9LbPQ/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ù…Ø±ØªÙØ¹Ø©", code:"WAH", icon:"ğŸ§—", desc:"Ø£Ø¹Ù…Ø§Ù„ ÙÙˆÙ‚ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø±Ø¶ ØªØªØ·Ù„Ø¨ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø³Ù‚ÙˆØ·.", url:"https://script.google.com/macros/s/AKfycbwKAdP5ldeTnVG47ghWCu-BetIiHzAFGSYrXfCsoMX2QIdRnNAeSyXptMDdlpjl07Ks/exec" },
          { title:"ØªØµØ±ÙŠØ­ Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø±ÙØ¹",               code:"LOP", icon:"ğŸ—ï¸", desc:"Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£ÙˆÙ†Ø§Ø´ ÙˆØ§Ù„Ø±ÙØ¹ Ø¨Ø§Ù„Ø±Ø§ÙØ¹Ø§Øª ÙˆØ§Ù„ÙˆÙ†Ø´Ø§Øª.",              url:"https://script.google.com/macros/s/AKfycbwJWXCguWxVrRUapCfukPQ2cgxRZOmMd9WjwCHDB9nr-EAR7K0r4ZGxEFz1Vi7quntd/exec" }
        ]
      }
    };

    // ===== DOM =====
    const projTitle   = document.getElementById('projTitle');
    const grid        = document.getElementById('grid');
    const skeleton    = document.getElementById('skeleton');
    const modal       = document.getElementById('projectModal');
    const closeModal  = document.getElementById('closeModalBtn');
    const changeBtn   = document.getElementById('changeProjectBtn');

    // ===== Helpers =====
    function getParam(name){ const u=new URL(location.href); return u.searchParams.get(name) }
    function setParam(name,val){
      const u=new URL(location.href); if(val==null){u.searchParams.delete(name)} else {u.searchParams.set(name,val)}
      history.replaceState({}, "", u.toString());
    }
    function renderSkeletons(n=6){
      skeleton.innerHTML=""; for(let i=0;i<n;i++){ const d=document.createElement('div'); d.className='skeleton'; skeleton.appendChild(d) }
    }
    function createCard({title, code, icon, desc, url}){
      const a=document.createElement('a'); a.className='card'; a.href=url; a.target="_blank"; a.rel="noopener";
      a.setAttribute('data-title', (title+' '+code).toLowerCase());
      a.innerHTML=`<div class="top"><span>${icon}</span><span class="title">${title}</span><span class="badge">${code}</span></div><div class="desc">${desc}</div>`;
      return a;
    }
    function renderProject(id){
      const p = PROJECTS[id]; if(!p) return;
      document.title = `ØªØµØ§Ø±ÙŠØ­ ${p.name} | Ø¨ÙˆØ§Ø¨Ø© ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„`;
      projTitle.textContent = p.name;
      renderSkeletons(p.links.length);
      grid.innerHTML = "";
      p.links.forEach(l=> grid.appendChild(createCard(l)));
      skeleton.innerHTML="";
      setParam('project', id);
      localStorage.setItem('ptw_project', id);
    }
    function filterPermits(){
      const val=(document.getElementById('searchInput').value||'').toLowerCase().trim();
      grid.querySelectorAll('.card').forEach(c=>{
        const t=(c.getAttribute('data-title')||'').toLowerCase();
        c.style.display = t.includes(val) ? '' : 'none';
      });
    }
    window.filterPermits = filterPermits;

    // ===== Modal logic =====
    function openModal(){ modal.hidden = false; document.body.style.overflow='hidden'; }
    function closeModalFn(){ modal.hidden = true; document.body.style.overflow=''; }
    modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModalFn(); });
    closeModal.addEventListener('click', closeModalFn);
    document.querySelectorAll('.choice').forEach(ch=>{
      ch.addEventListener('click', ()=>{ renderProject(ch.dataset.project); closeModalFn(); });
      ch.addEventListener('keypress', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); ch.click(); }});
    });
    changeBtn.addEventListener('click', openModal);

    // Ø§Ø®ØªØµØ§Ø± "/" Ù„Ù„Ø¨Ø­Ø«
    window.addEventListener('keydown', e=>{
      if(e.key==='/' && !/input|textarea/i.test(document.activeElement.tagName)){
        e.preventDefault(); document.getElementById('searchInput').focus();
      }
      if(e.key==='Escape' && !modal.hidden){ closeModalFn(); }
    });

    // ===== Init =====
    (function init(){
      const byURL = getParam('project');
      const byMem = localStorage.getItem('ptw_project');
      if(byURL && PROJECTS[byURL]){
        renderProject(byURL);
        return; // Ù„Ø§ ØªÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
      }
      if(byMem && PROJECTS[byMem]){
        renderProject(byMem);
        openModal(); // Ù†Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø±Ø¶Ù‡ Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ (ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø³Ø·Ø± Ø¥Ù† Ø­Ø¨ÙŠØª)
        return;
      }
      // Ù…Ø§ ÙÙŠØ´ ØªØ­Ø¯ÙŠØ¯: Ø§ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
      openModal();
    })();
  </script>
</body>
</html>
