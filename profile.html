<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ | Ø¨ÙˆØ§Ø¨Ø© ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg:#020617;
      --card-bg:rgba(15,23,42,.96);
      --card-brd:rgba(148,163,184,.6);
      --accent:#3b82f6;
      --accent-soft:rgba(59,130,246,.12);
      --text:#e5e7eb;
      --muted:#9ca3af;
      --danger:#ef4444;
      --success:#22c55e;
      --radius:18px;
      --shadow:0 22px 60px rgba(15,23,42,.85);
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:'Segoe UI',system-ui,Tahoma;
      background:
        radial-gradient(circle at top,#1f2937 0,#020617 60%,#000 100%);
      color:var(--text);
      min-height:100vh;
      padding:16px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .wrap{
      width:100%;
      max-width:480px;
      position:relative;
    }
    .card{
      background:var(--card-bg);
      border-radius:var(--radius);
      border:1px solid var(--card-brd);
      box-shadow:var(--shadow);
      padding:18px 16px 16px;
      backdrop-filter:blur(10px);
    }
    .header{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:14px;
    }
    .avatar{
      width:52px;
      height:52px;
      border-radius:999px;
      background:linear-gradient(135deg,#3b82f6,#22c55e);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:800;
      font-size:1.4rem;
      color:#eff6ff;
      box-shadow:0 14px 35px rgba(37,99,235,.8);
      flex-shrink:0;
    }
    .header-main{
      flex:1;
      min-width:0;
    }
    .header-main h1{
      margin:0;
      font-size:1.25rem;
    }
    .header-main p{
      margin:2px 0 0;
      font-size:.86rem;
      color:var(--muted);
      word-break:break-all;
    }
    .chip-role{
      margin-top:6px;
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:3px 9px;
      border-radius:999px;
      background:rgba(148,163,184,.12);
      border:1px solid rgba(148,163,184,.5);
      font-size:.78rem;
      color:#e5e7eb;
    }
    .badge-pill{
      position:absolute;
      inset-inline-end:0;
      top:-10px;
      padding:5px 10px;
      font-size:.78rem;
      border-radius:999px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(148,163,184,.7);
      color:#e5e7eb;
      box-shadow:0 15px 40px rgba(15,23,42,.9);
    }

    .section{
      margin-top:14px;
      padding-top:10px;
      border-top:1px dashed rgba(75,85,99,.8);
    }
    .section h2{
      margin:0 0 8px;
      font-size:.98rem;
    }
    .section p{
      margin:0 0 8px;
      font-size:.8rem;
      color:var(--muted);
    }
    .grid{
      display:grid;
      gap:8px;
    }

    label{
      display:block;
      font-size:.8rem;
      margin-bottom:2px;
    }
    .input{
      width:100%;
      border-radius:11px;
      border:1px solid rgba(148,163,184,.7);
      background:rgba(15,23,42,.9);
      color:var(--text);
      padding:8px 10px;
      font-size:.86rem;
    }
    .input[disabled]{
      opacity:.75;
      background:rgba(15,23,42,.7);
    }
    .input:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(59,130,246,.55);
    }

    .btn-row{
      display:flex;
      gap:8px;
      margin-top:10px;
      flex-wrap:wrap;
    }
    .btn{
      border-radius:999px;
      border:1px solid rgba(148,163,184,.8);
      background:rgba(15,23,42,.9);
      color:var(--text);
      padding:8px 14px;
      font-size:.86rem;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-weight:600;
    }
    .btn-primary{
      border-color:var(--accent);
      background:linear-gradient(135deg,#3b82f6,#2563eb);
      color:#eff6ff;
    }
    .btn-danger{
      border-color:var(--danger);
      color:#fecaca;
    }
    .btn:hover{
      filter:brightness(1.05);
      transform:translateY(-1px);
    }
    .btn:active{
      transform:translateY(0);
    }

    .hint{
      margin-top:4px;
      font-size:.76rem;
      color:var(--muted);
    }

    .alert{
      margin-top:8px;
      font-size:.8rem;
      border-radius:10px;
      padding:7px 9px;
      border:1px solid rgba(148,163,184,.6);
      background:rgba(15,23,42,.8);
      color:var(--muted);
    }
    .alert.success{
      border-color:rgba(34,197,94,.7);
      background:rgba(22,163,74,.18);
      color:#bbf7d0;
    }
    .alert.error{
      border-color:rgba(239,68,68,.7);
      background:rgba(127,29,29,.35);
      color:#fee2e2;
    }

    .links-row{
      margin-top:12px;
      display:flex;
      justify-content:space-between;
      gap:8px;
      font-size:.78rem;
      color:var(--muted);
    }
    .link{
      color:#bfdbfe;
      text-decoration:none;
    }
    .link:hover{
      text-decoration:underline;
    }

    @media(max-width:640px){
      body{
        padding:10px 10px 18px;
        align-items:flex-start;
      }
      .wrap{margin-top:24px;}
      .card{padding-inline:14px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="badge-pill">
        ğŸ‘‹ Ø£Ù‡Ù„Ø§Ù‹ <span id="badgeName">Ø¶ÙŠÙ</span> â€” ÙŠÙˆÙ… Ø¬Ù…ÙŠÙ„ Ø¹Ù„ÙŠÙƒ
      </div>

      <header class="header">
        <div class="avatar" id="avatarCircle">U</div>
        <div class="header-main">
          <h1 id="displayName">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h1>
          <p id="displayEmail">email@example.com</p>
          <div class="chip-role" id="displayRoleChip">
            ğŸ« <span id="displayRoleText">Ø¯ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span>
          </div>
        </div>
      </header>

      <!-- Ù‚Ø³Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ -->
      <section class="section">
        <h2>Ø¨ÙŠØ§Ù†Ø§ØªÙŠ</h2>
        <p>ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ« Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ. Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙØ­ÙØ¸ ÙÙŠ <span class="mono">app_users</span>.</p>

        <form id="profileForm" class="grid">
          <div>
            <label for="fullName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
            <input id="fullName" class="input" type="text" autocomplete="name" />
          </div>
          <div>
            <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
            <input id="phone" class="input" type="tel" autocomplete="tel" />
          </div>
          <div>
            <label for="jobTitle">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label>
            <input id="jobTitle" class="input" type="text" />
          </div>
          <div>
            <label for="emailDisplay">Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·)</label>
            <input id="emailDisplay" class="input" type="email" disabled />
            <div class="hint">Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙŠØ¬Ø¨ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„.</div>
          </div>

          <div class="btn-row">
            <button type="submit" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
            <button type="button" class="btn" id="btnBackPortal">â¬… Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¨ÙˆØ§Ø¨Ø©</button>
          </div>
          <div id="profileMsg" class="alert" style="display:none;"></div>
        </form>
      </section>

      <!-- Ù‚Ø³Ù… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
      <section class="section">
        <h2>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h2>
        <p>Ø³ÙŠØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙÙŠ <strong>Firebase Auth</strong> Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ.</p>

        <form id="passwordForm" class="grid">
          <div>
            <label for="newPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
            <input id="newPassword" class="input" type="password" autocomplete="new-password" required />
          </div>
          <div>
            <label for="confirmPassword">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
            <input id="confirmPassword" class="input" type="password" autocomplete="new-password" required />
          </div>

          <div class="btn-row">
            <button type="submit" class="btn btn-primary">ğŸ” ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
            <button type="button" class="btn btn-danger" id="btnLogout">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
          </div>
          <div id="passwordMsg" class="alert" style="display:none;"></div>
        </form>
        <div class="hint">
          ÙÙŠ Ø­Ø§Ù„ Ø¸Ù‡ÙˆØ± Ø±Ø³Ø§Ù„Ø© Ø¨Ø¶Ø±ÙˆØ±Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŒ Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø«Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø¬Ø¯ÙŠØ¯ Ù‚Ø¨Ù„ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.
        </div>
      </section>

      <div class="links-row">
        <span>Ø¨ÙˆØ§Ø¨Ø© ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ø¹Ù…Ù„</span>
        <a href="/portal" class="link">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import {
      getAuth,
      updatePassword
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import {
      getFirestore,
      doc,
      setDoc,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDXQW3_6iFkb8Ec2aaVtFMJZYxLN-FmI54",
      authDomain: "ptw-najran-sharurah.firebaseapp.com",
      projectId: "ptw-najran-sharurah",
      storageBucket: "ptw-najran-sharurah.firebasestorage.app",
      messagingSenderId: "848619550286",
      appId: "1:848619550286:web:fe5c470f67236b2519751f"
    };

    let app;
    if (!getApps().length) {
      app = initializeApp(firebaseConfig);
    } else {
      app = getApp();
    }
    const auth = getAuth(app);
    const db   = getFirestore(app);

    const USERS_KEY = "ptw_users";

    const badgeName      = document.getElementById("badgeName");
    const avatarCircle   = document.getElementById("avatarCircle");
    const displayName    = document.getElementById("displayName");
    const displayEmail   = document.getElementById("displayEmail");
    const displayRoleChip= document.getElementById("displayRoleChip");
    const displayRoleTxt = document.getElementById("displayRoleText");

    const fullNameInput  = document.getElementById("fullName");
    const phoneInput     = document.getElementById("phone");
    const jobTitleInput  = document.getElementById("jobTitle");
    const emailDisplay   = document.getElementById("emailDisplay");

    const profileForm    = document.getElementById("profileForm");
    const passwordForm   = document.getElementById("passwordForm");
    const profileMsg     = document.getElementById("profileMsg");
    const passwordMsg    = document.getElementById("passwordMsg");
    const btnBackPortal  = document.getElementById("btnBackPortal");
    const btnLogout      = document.getElementById("btnLogout");

    let CURRENT_USER = null;
    let LOCAL_USER   = null;

    function readUsers(){
      try{
        const raw = localStorage.getItem(USERS_KEY);
        if (!raw) return [];
        const list = JSON.parse(raw);
        return Array.isArray(list) ? list : [];
      }catch(e){
        console.error("readUsers error", e);
        return [];
      }
    }
    function writeUsers(list){
      try{
        localStorage.setItem(USERS_KEY, JSON.stringify(list));
      }catch(e){
        console.error("writeUsers error", e);
      }
    }

    function protectProfile(){
      try{
        const raw = localStorage.getItem("aln_session");
        if (!raw){
          window.location.href = "/";
          return;
        }
        const session = JSON.parse(raw);
        if (!session || !session.username || !session.role){
          localStorage.removeItem("aln_session");
          window.location.href = "/";
          return;
        }
        CURRENT_USER = {
          ...session,
          role:(session.role || "").toLowerCase()
        };
      }catch(e){
        console.error(e);
        window.location.href = "/";
      }
    }

    function mapRoleText(role){
      switch(role){
        case "admin": return "Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… (Admin)";
        case "najran": return "Ù…Ø´Ø±ÙˆØ¹ Ù†Ø¬Ø±Ø§Ù†";
        case "sharurah": return "Ù…Ø´Ø±ÙˆØ¹ Ø´Ø±ÙˆØ±Ø©";
        case "najran_viewer": return "Ø¹Ø§Ø±Ø¶ Ù†Ø¬Ø±Ø§Ù† (Viewer)";
        case "sharurah_viewer": return "Ø¹Ø§Ø±Ø¶ Ø´Ø±ÙˆØ±Ø© (Viewer)";
        default: return role || "Ù…Ø³ØªØ®Ø¯Ù…";
      }
    }

    function showProfileData(){
      if (!CURRENT_USER) return;

      const username = CURRENT_USER.username;
      const email    = CURRENT_USER.email || "";
      const role     = (CURRENT_USER.role || "").toLowerCase();

      const firstLetter = (username && username[0] || "U").toUpperCase();
      avatarCircle.textContent = firstLetter;
      displayName.textContent  = username;
      displayEmail.textContent = email || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø³Ø¬Ù„";
      badgeName.textContent    = username;
      displayRoleTxt.textContent = mapRoleText(role);

      emailDisplay.value = email;

      const list = readUsers();
      LOCAL_USER = list.find(u => (u.username || "").toLowerCase() === String(username).toLowerCase()) || null;

      if (LOCAL_USER){
        fullNameInput.value = LOCAL_USER.fullName || "";
        phoneInput.value    = LOCAL_USER.phone || "";
        jobTitleInput.value = LOCAL_USER.jobTitle || "";
      }
    }

    async function saveProfileToFirestore(profile){
      try{
        const username = CURRENT_USER.username;
        if (!username) return;

        const docRef = doc(db, "app_users", username.toLowerCase());
        await setDoc(docRef, {
          username: username,
          email: CURRENT_USER.email || null,
          role: CURRENT_USER.role || null,
          active: true,
          fullName: profile.fullName || null,
          phone: profile.phone || null,
          jobTitle: profile.jobTitle || null,
          updatedAt: serverTimestamp(),
          source: "profile_page"
        }, { merge:true });
      }catch(e){
        console.error("saveProfileToFirestore error", e);
        throw e;
      }
    }

    profileForm.addEventListener("submit", async (e)=>{
      e.preventDefault();
      if (!CURRENT_USER) return;

      const fullName = fullNameInput.value.trim();
      const phone    = phoneInput.value.trim();
      const jobTitle = jobTitleInput.value.trim();

      profileMsg.style.display = "none";

      try{
        const list = readUsers();
        const idx = list.findIndex(u =>
          (u.username || "").toLowerCase() === String(CURRENT_USER.username).toLowerCase()
        );

        const nowIso = new Date().toISOString();

        if (idx === -1){
          list.push({
            username: CURRENT_USER.username,
            email: CURRENT_USER.email || null,
            password: null,
            role: CURRENT_USER.role || "najran",
            active: true,
            createdAt: nowIso,
            fullName,
            phone,
            jobTitle
          });
        }else{
          list[idx] = {
            ...list[idx],
            fullName,
            phone,
            jobTitle
          };
        }
        writeUsers(list);

        await saveProfileToFirestore({ fullName, phone, jobTitle });

        profileMsg.textContent = "ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­.";
        profileMsg.className = "alert success";
        profileMsg.style.display = "block";
      }catch(err){
        console.error(err);
        profileMsg.textContent = "ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù†ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
        profileMsg.className = "alert error";
        profileMsg.style.display = "block";
      }
    });

    passwordForm.addEventListener("submit", async (e)=>{
      e.preventDefault();
      passwordMsg.style.display = "none";

      const newPass = document.getElementById("newPassword").value.trim();
      const confirm = document.getElementById("confirmPassword").value.trim();

      if (!newPass || newPass.length < 6){
        passwordMsg.textContent = "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 6 Ø£Ø­Ø±Ù.";
        passwordMsg.className = "alert error";
        passwordMsg.style.display = "block";
        return;
      }
      if (newPass !== confirm){
        passwordMsg.textContent = "ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…Ø·Ø§Ø¨Ù‚.";
        passwordMsg.className = "alert error";
        passwordMsg.style.display = "block";
        return;
      }

      try{
        const user = auth.currentUser;
        if (!user){
          passwordMsg.textContent = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¹Ù„Ù‰ FirebaseØŒ Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø«Ù… Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§.";
          passwordMsg.className = "alert error";
          passwordMsg.style.display = "block";
          return;
        }

        await updatePassword(user, newPass);

        try{
          const list = readUsers();
          const idx = list.findIndex(u =>
            (u.username || "").toLowerCase() === String(CURRENT_USER.username).toLowerCase()
          );
          if (idx !== -1){
            list[idx].password = newPass;
            writeUsers(list);
          }
        }catch(e){
          console.error("update local password error", e);
        }

        passwordMsg.textContent = "ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­.";
        passwordMsg.className = "alert success";
        passwordMsg.style.display = "block";

        document.getElementById("newPassword").value = "";
        document.getElementById("confirmPassword").value = "";
      }catch(err){
        console.error("updatePassword error", err);
        let msg = "ØªØ¹Ø°Ø± ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¢Ù†.";
        if (err.code === "auth/requires-recent-login"){
          msg = "ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø«Ù… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.";
        }
        passwordMsg.textContent = msg;
        passwordMsg.className = "alert error";
        passwordMsg.style.display = "block";
      }
    });

    btnBackPortal.addEventListener("click", () => {
      window.location.href = "/portal";
    });

    btnLogout.addEventListener("click", () => {
      localStorage.removeItem("aln_session");
      window.location.href = "/";
    });

    (function init(){
      protectProfile();
      if (!CURRENT_USER) return;
      showProfileData();
      document.title = `Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ | ${CURRENT_USER.username}`;
    })();
  </script>
</body>
</html>
